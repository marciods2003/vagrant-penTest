# Projeto para criaçao de infraestrutura de servidores e serviços com vagrant, debian, freebsd e kalilinux #

 Autor : m4rc10d5 
 usuario e senha de todas as maquinas virtuais caso necessário :
 user = vagrant
 pass = vagrant

- Criação de 4 maquinas virtuais com as seguintes configurações:
<pre>
 - Memoria RAM = 512
 - CPU = 2 
 - Network = Modo Bridge (Rede 192.168.2.0/24)
 - Nomes, sistemas operacionais e serviços instalados nas maquians virtuais:
    - svr-pentest   "kalilinux/rolling" (Sistema Operacioanl para Pentesters)
    - svr-web1      "debian/bullseye64" (Servidor Apache2 + php + Servidor FTP - vsftpd)
    - svr-db1       "debian/bullseye64" (Servidor de bando de dados MySql - MariaDB)
    - svr-dns       "generic/freebsd13" (Servidor de resolução de nomes Bind9)
</pre>
** todas as configurações podem ser analisadas e alteradas no arquivo Vagrantfile 
 
 - Os arquivos de instalação e configuração estão dentro da pasta scripts (Somente alterar se souber o que esta fezendo)

 ---------------------------------------------------------------------------------

 - Obs.: É necessário liberar a consulta a resolução de nomes para a rede 192.168.2.0/24 
 - Para isso acrescente ao arquivo de configuração do bind /usr/local/etc/named/named.conf na linha 20 arescentando a rede que tera permissão para consultas DNS
 - ORIGINAL
 <pre>
  listen-on { 127.0.0.1; };
 </pre>

 - EDITADO
 <pre>
  listen-on { 127.0.0.1; 192.168.2.0/24; };
 </pre>

 - Salve o arquivos e reinicie o serviço de DNS com o comando:
   service named restart

 - Pra verificar se o serviço subiu sem problemas execute:
   tail /var/log/messages

 - Voce recebera a seguinte saida:
<pre>
 Jan 14 14:30:34 freebsd13 named[931]: #----------------------------------------------------
 Jan 14 14:30:34 freebsd13 named[931]: BIND 9 is maintained by Internet Systems Consortium,
 Jan 14 14:30:34 freebsd13 named[931]: Inc. (ISC), a non-profit 501(c)(3) public-benefit 
 Jan 14 14:30:34 freebsd13 named[931]: corporation.  Support and training for BIND 9 are 
 Jan 14 14:30:34 freebsd13 named[931]: available at https://www.isc.org/support
 Jan 14 14:30:34 freebsd13 named[931]:-------------------------------------------------
 Jan 14 14:30:34 freebsd13 named[931]: command channel listening on 127.0.0.1#953
 Jan 14 14:30:34 freebsd13 named[931]: command channel listening on ::1#953
 Jan 14 14:30:34 freebsd13 named[931]: all zones loaded
 Jan 14 14:30:34 freebsd13 named[931]: running
</pre>

 - Para testar logue em algum servidor e realize uma consulta no servidor dns com o seguinte comando:

<pre>  
 dig terra.com

 dig cda.com.br

 dig pentest.cda.com.br
</pre>
 ---------------------------------------------------------------------------------------------------------------
 
 Feito isso seu ambiente de testes esta pronto para ser usado, basta usar o kalilinux para realizar os testes de intrusão ou analise de vulnerabilidades 

